'use client';

import { useMemo, useState } from 'react';
import Link from 'next/link';
import { Button } from '@/components/ui/Button';
import { Card } from '@/components/ui/Card';
import { Navbar } from '@/components/Navbar';
import { Footer } from '@/components/Footer';
import { ProviderApplicationForm } from '@/components/ProviderApplicationForm';
import { HeroBackground } from '@/components/HeroBackground';
import { formatCurrency } from '@/lib/utils';

const rateOptions = [
  { label: '$45/hr â€” Cleaning', value: 45 },
  { label: '$65/hr â€” Handyman', value: 65 },
  { label: '$75/hr â€” Plumbing', value: 75 },
  { label: '$85/hr â€” Electrical', value: 85 },
  { label: '$55/hr â€” Beauty', value: 55 },
];

export function HomePage() {
  const [hours, setHours] = useState(25);
  const [rate, setRate] = useState(75);

  const monthlyEarnings = useMemo(() => {
    const gross = hours * rate * 4;
    const afterFee = gross * 0.85;
    return Math.round(afterFee);
  }, [hours, rate]);

  return (
    <>
      <Navbar />
      <main className="flex flex-col overflow-hidden">
        <section className="relative min-h-[90vh] flex items-center overflow-hidden bg-gradient-hero pt-20">
          <div className="absolute top-20 right-0 w-96 h-96 bg-gradient-to-br from-cyan-200 to-blue-200 rounded-full blur-3xl opacity-40 animate-float-slow" />
          <div className="absolute bottom-0 left-20 w-80 h-80 bg-gradient-to-br from-teal-200 to-cyan-200 rounded-full blur-3xl opacity-30 animate-float-slower" />
          <div className="absolute top-1/2 left-1/4 w-72 h-72 bg-gradient-to-br from-blue-200 to-blue-300 rounded-full blur-3xl opacity-20 animate-float-slow" />

          <div className="max-w-7xl mx-auto px-6 relative z-10 grid grid-cols-2 gap-16 items-center">
            <div className="space-y-8">
              <div className="space-y-4">
                <div className="inline-flex items-center gap-2 text-sm font-semibold text-[#2F80ED] bg-blue-50 px-4 py-2 rounded-full">
                  <span className="h-2 w-2 rounded-full bg-[#2F80ED]" />
                  Join 500+ verified professionals
                </div>
                <h1 className="text-6xl font-bold text-dark leading-tight">
                  Grow your business with
                  <span className="block bg-gradient-accent bg-clip-text text-transparent">Urbance</span>
                </h1>
              </div>

              <p className="text-lg text-medium-grey leading-relaxed max-w-lg">
                Access thousands of customers, flexible scheduling, instant payouts, and full support. Join BCâ€™s fastest-growing home services platform.
              </p>

              <div className="flex gap-4 pt-4">
                <Link href="#apply" className="group">
                  <Button size="lg">
                    <span className="flex items-center gap-2">
                      Start Application
                      <svg className="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7l5 5m0 0l-5 5m5-5H6" />
                      </svg>
                    </span>
                  </Button>
                </Link>
                <Link href="#requirements">
                  <Button variant="outline" size="lg">
                    View Requirements
                  </Button>
                </Link>
              </div>

              <div className="flex gap-8 pt-8 border-t border-blue-100">
                {[
                  { number: '$8,450', label: 'Avg Monthly Earnings' },
                  { number: '24/7', label: 'Support Available' },
                  { number: 'Same Day', label: 'Payouts' },
                ].map((stat) => (
                  <div key={stat.label}>
                    <div className="text-2xl font-bold text-blue-800">{stat.number}</div>
                    <div className="text-sm text-medium-grey">{stat.label}</div>
                  </div>
                ))}
              </div>
            </div>

            <div className="relative h-[520px]">
              <div className="absolute inset-0 bg-white rounded-3xl shadow-soft-lg border border-blue-100 p-8">
                <div className="flex items-center justify-between mb-8">
                  <h3 className="text-xl font-semibold text-blue-900">ðŸ’° Your Potential</h3>
                  <span className="text-xs font-semibold text-blue-800 bg-blue-50 px-3 py-1 rounded-full">This Month</span>
                </div>
                <div className="space-y-6">
                  <div>
                    <label className="text-sm font-medium text-dark">Hours per week</label>
                    <input
                      type="range"
                      min={10}
                      max={40}
                      step={5}
                      value={hours}
                      onChange={(event) => setHours(Number(event.target.value))}
                      className="w-full accent-blue-800 mt-3"
                    />
                    <div className="text-sm text-medium-grey mt-2">{hours} hours</div>
                  </div>

                  <div>
                    <label className="text-sm font-medium text-dark">Hourly rate</label>
                    <select
                      value={rate}
                      onChange={(event) => setRate(Number(event.target.value))}
                      className="mt-3 w-full border border-blue-100 rounded-xl px-4 py-2.5 bg-white"
                    >
                      {rateOptions.map((option) => (
                        <option key={option.value} value={option.value}>
                          {option.label}
                        </option>
                      ))}
                    </select>
                  </div>

                  <div className="bg-gradient-to-br from-cyan-200/40 to-blue-100 rounded-2xl p-6 border border-blue-100">
                    <div className="text-sm text-medium-grey">Estimated Monthly Earnings</div>
                    <div className="text-4xl font-bold text-blue-800 mt-2">
                      {formatCurrency(monthlyEarnings)}
                    </div>
                    <div className="text-xs text-medium-grey mt-1">After platform fee (15%)</div>
                  </div>
                </div>
              </div>
              <div className="absolute -top-6 -right-8 w-36 h-36 bg-gradient-to-br from-cyan-200 to-blue-200 rounded-3xl opacity-40 rotate-6" />
              <div className="absolute -bottom-8 -left-6 w-28 h-28 bg-gradient-to-br from-teal-200 to-cyan-200 rounded-2xl opacity-50 -rotate-6" />
            </div>
          </div>
        </section>

        <section className="py-28 px-6 bg-white" id="benefits">
          <div className="max-w-7xl mx-auto">
            <div className="text-center mb-16">
              <h2 className="text-5xl font-bold text-dark mb-4">Why professionals choose Urbance</h2>
              <p className="text-xl text-medium-grey">Everything you need to grow your business</p>
            </div>

            <div className="grid grid-cols-3 gap-8">
              {[
                {
                  icon: 'ðŸ“ˆ',
                  title: 'Steady Customer Flow',
                  description: 'Automated booking system and real-time job notifications.',
                  items: ['Automated booking', 'Real-time alerts', 'Customer pre-screening'],
                },
                {
                  icon: 'ðŸ’³',
                  title: 'Fast, Secure Payments',
                  description: 'Instant payouts after every job with automated invoicing.',
                  items: ['Same-day payouts', 'Multiple payment options', 'Automatic invoicing'],
                },
                {
                  icon: 'ðŸ“±',
                  title: 'Smart Tools',
                  description: 'Professional dashboard for scheduling and earnings tracking.',
                  items: ['Mobile access', 'Schedule optimization', 'Performance analytics'],
                },
                {
                  icon: 'ðŸ›¡ï¸',
                  title: 'Insurance Coverage',
                  description: 'Comprehensive liability coverage on every job.',
                  items: ['$2M coverage', 'Property protection', 'Legal support'],
                },
                {
                  icon: 'â°',
                  title: 'Flexible Schedule',
                  description: 'Choose when and where you work. Youâ€™re in control.',
                  items: ['Set your hours', 'Pick service areas', 'Decline without penalty'],
                },
                {
                  icon: 'ðŸŽ“',
                  title: 'Training & Growth',
                  description: 'Free training resources and certification support.',
                  items: ['Online courses', 'Certification help', 'Marketing support'],
                },
              ].map((benefit) => (
                <Card key={benefit.title} className="p-8">
                  <div className="text-4xl mb-4">{benefit.icon}</div>
                  <h3 className="text-xl font-bold text-dark mb-3">{benefit.title}</h3>
                  <p className="text-medium-grey mb-4">{benefit.description}</p>
                  <ul className="text-sm text-medium-grey space-y-2">
                    {benefit.items.map((item) => (
                      <li key={item} className="flex items-center gap-2">
                        <span className="text-blue-800">âœ“</span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </Card>
              ))}
            </div>
          </div>
        </section>

        <section className="py-28 px-6 bg-gradient-to-b from-cyan-200/40 to-blue-100" id="requirements">
          <div className="max-w-7xl mx-auto">
            <div className="text-center mb-16">
              <h2 className="text-5xl font-bold text-dark mb-4">Requirements to join</h2>
              <p className="text-xl text-medium-grey">We maintain high standards to ensure quality service</p>
            </div>

            <div className="grid grid-cols-3 gap-8">
              {[
                {
                  icon: 'ðŸ‘¤',
                  title: 'Basic Requirements',
                  items: ['19+ years old', 'Legal right to work in Canada', 'Government-issued ID', 'Valid phone and email'],
                },
                {
                  icon: 'ðŸ”§',
                  title: 'Professional Qualifications',
                  items: ['2+ years experience', 'Required licenses', 'Liability insurance', 'Professional tools'],
                },
                {
                  icon: 'âœ…',
                  title: 'Verification Process',
                  items: ['Background check', 'Reference verification', 'Skills assessment', 'Onboarding training'],
                },
              ].map((category) => (
                <Card key={category.title} className="p-8">
                  <div className="flex items-center gap-3 mb-6">
                    <div className="text-3xl">{category.icon}</div>
                    <h3 className="text-xl font-bold text-dark">{category.title}</h3>
                  </div>
                  <ul className="space-y-3 text-medium-grey">
                    {category.items.map((item) => (
                      <li key={item} className="flex items-start gap-3">
                        <span className="text-blue-800">âœ“</span>
                        <span>{item}</span>
                      </li>
                    ))}
                  </ul>
                </Card>
              ))}
            </div>

            <div className="text-center mt-12">
              <p className="text-medium-grey mb-4">Ready to apply? The process takes about 10 minutes.</p>
              <Link href="#apply">
                <Button size="lg">Start Your Application</Button>
              </Link>
            </div>
          </div>
        </section>

        <section className="py-28 px-6 bg-white">
          <div className="max-w-7xl mx-auto">
            <div className="text-center mb-16">
              <h2 className="text-5xl font-bold text-dark mb-4">How it works</h2>
              <p className="text-xl text-medium-grey">From application to your first job in 4 simple steps</p>
            </div>

            <div className="grid grid-cols-4 gap-6">
              {[
                {
                  step: '01',
                  title: 'Apply Online',
                  description: 'Share your experience and qualifications. Takes about 10 minutes.',
                  bullets: ['Upload documents', 'Choose service categories', 'Set service areas'],
                },
                {
                  step: '02',
                  title: 'Verification',
                  description: 'We verify credentials, conduct checks, and review references.',
                  bullets: ['Document verification', 'Background check', 'Reference calls'],
                },
                {
                  step: '03',
                  title: 'Onboarding',
                  description: 'Complete training, set up your profile, and configure payments.',
                  bullets: ['Platform training', 'Profile setup', 'Payment configuration'],
                },
                {
                  step: '04',
                  title: 'Start Earning',
                  description: 'Accept jobs, deliver great service, and get paid instantly.',
                  bullets: ['Job notifications', 'Flexible scheduling', 'Instant payouts'],
                },
              ].map((step) => (
                <Card key={step.step} className="p-8">
                  <div className="text-4xl font-bold text-blue-800 mb-4">{step.step}</div>
                  <h3 className="text-xl font-bold text-dark mb-2">{step.title}</h3>
                  <p className="text-medium-grey mb-4">{step.description}</p>
                  <ul className="text-sm text-medium-grey space-y-2">
                    {step.bullets.map((item) => (
                      <li key={item} className="flex items-center gap-2">
                        <span className="text-blue-800">â€¢</span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </Card>
              ))}
            </div>
          </div>
        </section>

        <section className="py-28 px-6 bg-gradient-to-b from-blue-100 to-cyan-200/40">
          <div className="max-w-7xl mx-auto">
            <div className="text-center mb-16">
              <h2 className="text-5xl font-bold text-dark mb-4">Success stories</h2>
              <p className="text-xl text-medium-grey">Real professionals, real results</p>
            </div>

            <div className="grid grid-cols-3 gap-8">
              {[
                {
                  name: 'James Martinez',
                  role: 'Handyman Â· Vancouver',
                  emoji: 'ðŸ‘¨â€ðŸ”§',
                  revenue: '$12.5K',
                  rating: '4.9â˜…',
                  quote: '"Urbance doubled my income in 3 months. The steady flow of customers and instant payouts have been game-changing."',
                },
                {
                  name: 'Sarah Chen',
                  role: 'Cleaning Professional Â· Burnaby',
                  emoji: 'ðŸ‘©â€ðŸ”§',
                  revenue: '$9.2K',
                  rating: '5.0â˜…',
                  quote: '"Flexible scheduling is perfect. I can work around my kidsâ€™ school hours and still make great money."',
                },
                {
                  name: 'Mike Thompson',
                  role: 'Electrician Â· Surrey',
                  emoji: 'ðŸ‘¨â€ðŸ’¼',
                  revenue: '$15.8K',
                  rating: '4.8â˜…',
                  quote: '"No more hunting for clients or late payments. Urbance handles admin so I can focus on the work."',
                },
              ].map((story) => (
                <Card key={story.name} className="p-8">
                  <div className="text-5xl mb-4">{story.emoji}</div>
                  <h3 className="text-xl font-bold text-dark">{story.name}</h3>
                  <p className="text-sm text-medium-grey mb-4">{story.role}</p>
                  <div className="flex items-center gap-6 mb-4">
                    <div>
                      <div className="text-lg font-bold text-blue-800">{story.revenue}</div>
                      <div className="text-xs text-medium-grey">Monthly Revenue</div>
                    </div>
                    <div>
                      <div className="text-lg font-bold text-blue-800">{story.rating}</div>
                      <div className="text-xs text-medium-grey">Rating</div>
                    </div>
                  </div>
                  <p className="text-medium-grey">{story.quote}</p>
                </Card>
              ))}
            </div>
          </div>
        </section>

        <section className="py-28 px-6 bg-gradient-to-b from-cyan-200/30 to-blue-100">
          <div className="max-w-6xl mx-auto">
            <div className="text-center mb-12">
              <h2 className="text-5xl font-bold text-dark mb-4">Start your application</h2>
              <p className="text-xl text-medium-grey">Takes about 10 minutes to complete</p>
            </div>
            <ProviderApplicationForm />
          </div>
        </section>

        <section className="py-28 px-6 bg-gradient-to-b from-cyan-200/30 to-blue-100">
          <div className="max-w-6xl mx-auto">
            <div className="text-center mb-16">
              <h2 className="text-5xl font-bold text-dark mb-4">Frequently asked questions</h2>
              <p className="text-xl text-medium-grey">Everything you need to know</p>
            </div>

            <div className="grid grid-cols-2 gap-8">
              {[
                {
                  title: 'Getting Started',
                  items: [
                    {
                      q: 'How long does the application process take?',
                      a: 'The application form takes about 10 minutes. Verification typically takes 3-5 business days.',
                    },
                    {
                      q: 'What are the costs to join?',
                      a: 'There are no upfront costs. We charge a 15% platform fee on completed jobs only.',
                    },
                    {
                      q: 'Do I need my own insurance?',
                      a: 'We recommend it, but we can provide coverage through partner insurers if needed.',
                    },
                  ],
                },
                {
                  title: 'Payments & Fees',
                  items: [
                    {
                      q: 'How and when do I get paid?',
                      a: 'You get paid via direct deposit within 24 hours of job completion.',
                    },
                    {
                      q: 'What is the platform fee?',
                      a: 'We charge 15% of the job total to cover support, marketing, and platform services.',
                    },
                    {
                      q: 'Can I offer my own pricing?',
                      a: 'Yes. You set your hourly or flat rate based on your experience and local market.',
                    },
                  ],
                },
              ].map((group) => (
                <Card key={group.title} className="p-8">
                  <h3 className="text-xl font-bold text-dark mb-4">{group.title}</h3>
                  <div className="space-y-4">
                    {group.items.map((item) => (
                      <details key={item.q} className="border border-blue-100 rounded-xl p-4">
                        <summary className="cursor-pointer font-medium text-dark">{item.q}</summary>
                        <p className="text-medium-grey mt-3">{item.a}</p>
                      </details>
                    ))}
                  </div>
                </Card>
              ))}
            </div>
          </div>
        </section>

        <section className="relative py-28 px-6 bg-gradient-accent overflow-hidden">
          <div className="absolute inset-0 opacity-20">
            <div className="absolute top-0 left-0 w-96 h-96 bg-white rounded-full mix-blend-multiply filter blur-3xl" />
            <div className="absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full mix-blend-multiply filter blur-3xl" />
          </div>

          <div className="max-w-4xl mx-auto text-center relative z-10">
            <h2 className="text-5xl font-bold text-white mb-6">Ready to start earning?</h2>
            <p className="text-xl text-white/90 mb-10">
              Join hundreds of successful service professionals on Urbance today.
            </p>
            <Link href="#apply" className="inline-block">
              <Button size="lg" className="bg-white text-blue-800 hover:bg-blue-50 text-lg px-8 py-6 font-semibold">
                Apply Now â€” Itâ€™s Free
              </Button>
            </Link>
          </div>
        </section>
      </main>
      <Footer />
    </>
  );
}
